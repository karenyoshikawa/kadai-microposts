mysql> USE bookstore
Database changed
mysql> SELECT * FROM bookstore.books ORDER BY price;
ERROR 1146 (42S02): Table 'bookstore.books' doesn't exist
mysql> show table;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1
mysql> CREATE TABLE bookstore.books (
    ->     id INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    ->     title VARCHAR(100),
    ->     price INT,
    ->     created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
    -> );
Query OK, 0 rows affected (0.01 sec)

mysql> source ~/environment/create_table_bookstore_books.sql
ERROR: 
Failed to open file '/home/ec2-user/environment/create_table_bookstore_books.sql', error: 2
mysql> source ~/environment/create table bookstore books.sql                                                                                                                               
ERROR: 
Failed to open file '/home/ec2-user/environment/create table bookstore books.sql', error: 2
mysql> show tables;
+---------------------+
| Tables_in_bookstore |
+---------------------+
| books               |
+---------------------+
1 row in set (0.00 sec)

mysql> INSERT INTO bookstore.books (title, price) VALUES ("はじめてのMySQL", 2980);
Query OK, 1 row affected (0.01 sec)

mysql> INSERT INTO bookstore.books (title, price) VALUES ("はじめてのPHP", 1980);
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO bookstore.books (title, price) VALUES ("はじめてのHTML", 1000);
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO bookstore.books (title, price) VALUES ("はじめてのCSS", 1000);
Query OK, 1 row affected (0.00 sec)

mysql> SELECT * FROM bookstore.books WHERE price > 1500;
+----+----------------------+-------+---------------------+
| id | title                | price | created_at          |
+----+----------------------+-------+---------------------+
|  1 | はじめてのMySQL      |  2980 | 2018-05-21 04:43:52 |
|  2 | はじめてのPHP        |  1980 | 2018-05-21 04:43:55 |
+----+----------------------+-------+---------------------+
2 rows in set (0.00 sec)

mysql> SELECT * FROM bookstore.books ORDER BY price;
+----+----------------------+-------+---------------------+
| id | title                | price | created_at          |
+----+----------------------+-------+---------------------+
|  3 | はじめてのHTML       |  1000 | 2018-05-21 04:44:03 |
|  4 | はじめてのCSS        |  1000 | 2018-05-21 04:44:12 |
|  2 | はじめてのPHP        |  1980 | 2018-05-21 04:43:55 |
|  1 | はじめてのMySQL      |  2980 | 2018-05-21 04:43:52 |
+----+----------------------+-------+---------------------+
4 rows in set (0.00 sec)

mysql> UPDATE bookstore.books SET price = 1200 WHERE price = 1000;
Query OK, 2 rows affected (0.00 sec)
Rows matched: 2  Changed: 2  Warnings: 0

mysql> SELECT * FROM bookstore.books;
+----+----------------------+-------+---------------------+
| id | title                | price | created_at          |
+----+----------------------+-------+---------------------+
|  1 | はじめてのMySQL      |  2980 | 2018-05-21 04:43:52 |
|  2 | はじめてのPHP        |  1980 | 2018-05-21 04:43:55 |
|  3 | はじめてのHTML       |  1200 | 2018-05-21 04:44:03 |
|  4 | はじめてのCSS        |  1200 | 2018-05-21 04:44:12 |
+----+----------------------+-------+---------------------+
4 rows in set (0.00 sec)

mysql> DELETE FROM bookstore.books WHERE title = "はじめてのCSS";
Query OK, 1 row affected (0.00 sec)

mysql> SELECT * FROM bookstore.books;
+----+----------------------+-------+---------------------+
| id | title                | price | created_at          |
+----+----------------------+-------+---------------------+
|  1 | はじめてのMySQL      |  2980 | 2018-05-21 04:43:52 |
|  2 | はじめてのPHP        |  1980 | 2018-05-21 04:43:55 |
|  3 | はじめてのHTML       |  1200 | 2018-05-21 04:44:03 |
+----+----------------------+-------+---------------------+
3 rows in set (0.00 sec)

mysql> SELECT COUNT(*) FROM bookstore.books;
+----------+
| COUNT(*) |
+----------+
|        3 |
+----------+
1 row in set (0.00 sec)

mysql>  SELECT COUNT(*) FROM bookstore.books WHERE price > 1500;
+----------+
| COUNT(*) |
+----------+
|        2 |
+----------+
1 row in set (0.00 sec)

mysql> SELECT SUM(price) FROM bookstore.books;
+------------+
| SUM(price) |
+------------+
|       6160 |
+------------+
1 row in set (0.00 sec)

mysql> SELECT AVG(price) FROM bookstore.books;
+------------+
| AVG(price) |
+------------+
|  2053.3333 |
+------------+
1 row in set (0.00 sec)

mysql> CREATE TABLE bookstore.books (
    ->     id INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    ->     title VARCHAR(100),
    ->     price INT,
    ->     chapter TEXT,
    ->     created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
    -> );
ERROR 1050 (42S01): Table 'books' already exists
mysql> CREATE TABLE bookstore.chapters (
    ->     id INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    ->     number INT,
    ->     title VARCHAR(100),
    ->     book_id INT,
    ->     created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
    -> );
Query OK, 0 rows affected (0.00 sec)

mysql> source ~/environment/create_table_bookstore_chapters.sql
ERROR: 
Failed to open file '/home/ec2-user/environment/create_table_bookstore_chapters.sql', error: 2
mysql> source ~/environment/create_table_bookstore_chapters.sql;
ERROR: 
Failed to open file '/home/ec2-user/environment/create_table_bookstore_chapters.sql', error: 2
mysql>  show tables;
+---------------------+
| Tables_in_bookstore |
+---------------------+
| books               |
| chapters            |
+---------------------+
2 rows in set (0.00 sec)

mysql> select * from books;
+----+----------------------+-------+---------------------+
| id | title                | price | created_at          |
+----+----------------------+-------+---------------------+
|  1 | はじめてのMySQL      |  2980 | 2018-05-21 04:43:52 |
|  2 | はじめてのPHP        |  1980 | 2018-05-21 04:43:55 |
|  3 | はじめてのHTML       |  1200 | 2018-05-21 04:44:03 |
+----+----------------------+-------+---------------------+
3 rows in set (0.00 sec)

mysql> INSERT INTO bookstore.chapters (number, title, book_id) VALUES (1, "MySQLとは", 2);
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO bookstore.chapters (number, title, book_id) VALUES (2, "テーブルとは", 2);
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO bookstore.chapters (number, title, book_id) VALUES (3, "CRUDとは", 2);
Query OK, 1 row affected (0.00 sec)

mysql> select * from chapters;
+----+--------+--------------------+---------+---------------------+
| id | number | title              | book_id | created_at          |
+----+--------+--------------------+---------+---------------------+
|  1 |      1 | MySQLとは          |       2 | 2018-05-21 04:53:39 |
|  2 |      2 | テーブルとは       |       2 | 2018-05-21 04:53:49 |
|  3 |      3 | CRUDとは           |       2 | 2018-05-21 04:53:59 |
+----+--------+--------------------+---------+---------------------+
3 rows in set (0.00 sec)

mysql> SELECT * FROM books INNER JOIN chapters ON books.id = chapters.book_id;
+----+--------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
| id | title              | price | created_at          | id | number | title              | book_id | created_at          |
+----+--------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
|  2 | はじめてのPHP      |  1980 | 2018-05-21 04:43:55 |  1 |      1 | MySQLとは          |       2 | 2018-05-21 04:53:39 |
|  2 | はじめてのPHP      |  1980 | 2018-05-21 04:43:55 |  2 |      2 | テーブルとは       |       2 | 2018-05-21 04:53:49 |
|  2 | はじめてのPHP      |  1980 | 2018-05-21 04:43:55 |  3 |      3 | CRUDとは           |       2 | 2018-05-21 04:53:59 |
+----+--------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
3 rows in set (0.01 sec)

mysql> SELECT * FROM books;
+----+----------------------+-------+---------------------+
| id | title                | price | created_at          |
+----+----------------------+-------+---------------------+
|  1 | はじめてのMySQL      |  2980 | 2018-05-21 04:43:52 |
|  2 | はじめてのPHP        |  1980 | 2018-05-21 04:43:55 |
|  3 | はじめてのHTML       |  1200 | 2018-05-21 04:44:03 |
+----+----------------------+-------+---------------------+
3 rows in set (0.00 sec)

mysql> SELECT * FROM books INNER JOIN chapters;
+----+----------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
| id | title                | price | created_at          | id | number | title              | book_id | created_at          |
+----+----------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
|  1 | はじめてのMySQL      |  2980 | 2018-05-21 04:43:52 |  1 |      1 | MySQLとは          |       2 | 2018-05-21 04:53:39 |
|  2 | はじめてのPHP        |  1980 | 2018-05-21 04:43:55 |  1 |      1 | MySQLとは          |       2 | 2018-05-21 04:53:39 |
|  3 | はじめてのHTML       |  1200 | 2018-05-21 04:44:03 |  1 |      1 | MySQLとは          |       2 | 2018-05-21 04:53:39 |
|  1 | はじめてのMySQL      |  2980 | 2018-05-21 04:43:52 |  2 |      2 | テーブルとは       |       2 | 2018-05-21 04:53:49 |
|  2 | はじめてのPHP        |  1980 | 2018-05-21 04:43:55 |  2 |      2 | テーブルとは       |       2 | 2018-05-21 04:53:49 |
|  3 | はじめてのHTML       |  1200 | 2018-05-21 04:44:03 |  2 |      2 | テーブルとは       |       2 | 2018-05-21 04:53:49 |
|  1 | はじめてのMySQL      |  2980 | 2018-05-21 04:43:52 |  3 |      3 | CRUDとは           |       2 | 2018-05-21 04:53:59 |
|  2 | はじめてのPHP        |  1980 | 2018-05-21 04:43:55 |  3 |      3 | CRUDとは           |       2 | 2018-05-21 04:53:59 |
|  3 | はじめてのHTML       |  1200 | 2018-05-21 04:44:03 |  3 |      3 | CRUDとは           |       2 | 2018-05-21 04:53:59 |
+----+----------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
9 rows in set (0.00 sec)

mysql> SELECT * FROM books INNER JOIN chapters ON books.id = chapters.book_id;
+----+--------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
| id | title              | price | created_at          | id | number | title              | book_id | created_at          |
+----+--------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
|  2 | はじめてのPHP      |  1980 | 2018-05-21 04:43:55 |  1 |      1 | MySQLとは          |       2 | 2018-05-21 04:53:39 |
|  2 | はじめてのPHP      |  1980 | 2018-05-21 04:43:55 |  2 |      2 | テーブルとは       |       2 | 2018-05-21 04:53:49 |
|  2 | はじめてのPHP      |  1980 | 2018-05-21 04:43:55 |  3 |      3 | CRUDとは           |       2 | 2018-05-21 04:53:59 |
+----+--------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
3 rows in set (0.01 sec)

mysql> INSERT INTO bookstore.chapters (number, title, book_id) VALUES (1, "PHPとは", 3);
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO bookstore.chapters (number, title, book_id) VALUES (2, "変数とは", 3);
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO bookstore.chapters (number, title, book_id) VALUES (3, "関数とは", 3);
Query OK, 1 row affected (0.00 sec)

mysql> SELECT * FROM books INNER JOIN chapters ON books.id = chapters.book_id;
+----+---------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
| id | title               | price | created_at          | id | number | title              | book_id | created_at          |
+----+---------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
|  2 | はじめてのPHP       |  1980 | 2018-05-21 04:43:55 |  1 |      1 | MySQLとは          |       2 | 2018-05-21 04:53:39 |
|  2 | はじめてのPHP       |  1980 | 2018-05-21 04:43:55 |  2 |      2 | テーブルとは       |       2 | 2018-05-21 04:53:49 |
|  2 | はじめてのPHP       |  1980 | 2018-05-21 04:43:55 |  3 |      3 | CRUDとは           |       2 | 2018-05-21 04:53:59 |
|  3 | はじめてのHTML      |  1200 | 2018-05-21 04:44:03 |  4 |      1 | PHPとは            |       3 | 2018-05-21 04:57:47 |
|  3 | はじめてのHTML      |  1200 | 2018-05-21 04:44:03 |  5 |      2 | 変数とは           |       3 | 2018-05-21 04:58:00 |
|  3 | はじめてのHTML      |  1200 | 2018-05-21 04:44:03 |  6 |      3 | 関数とは           |       3 | 2018-05-21 04:58:09 |
+----+---------------------+-------+---------------------+----+--------+--------------------+---------+---------------------+
6 rows in set (0.00 sec)

mysql> SELECT * FROM chapters;
+----+--------+--------------------+---------+---------------------+
| id | number | title              | book_id | created_at          |
+----+--------+--------------------+---------+---------------------+
|  1 |      1 | MySQLとは          |       2 | 2018-05-21 04:53:39 |
|  2 |      2 | テーブルとは       |       2 | 2018-05-21 04:53:49 |
|  3 |      3 | CRUDとは           |       2 | 2018-05-21 04:53:59 |
|  4 |      1 | PHPとは            |       3 | 2018-05-21 04:57:47 |
|  5 |      2 | 変数とは           |       3 | 2018-05-21 04:58:00 |
|  6 |      3 | 関数とは           |       3 | 2018-05-21 04:58:09 |
+----+--------+--------------------+---------+---------------------+
6 rows in set (0.00 sec)

mysql> SELECT * FROM chapters GROUP BY book_id;
+----+--------+-------------+---------+---------------------+
| id | number | title       | book_id | created_at          |
+----+--------+-------------+---------+---------------------+
|  1 |      1 | MySQLとは   |       2 | 2018-05-21 04:53:39 |
|  4 |      1 | PHPとは     |       3 | 2018-05-21 04:57:47 |
+----+--------+-------------+---------+---------------------+
2 rows in set (0.00 sec)

mysql> SELECT *, COUNT(*) FROM chapters GROUP BY book_id;
+----+--------+-------------+---------+---------------------+----------+
| id | number | title       | book_id | created_at          | COUNT(*) |
+----+--------+-------------+---------+---------------------+----------+
|  1 |      1 | MySQLとは   |       2 | 2018-05-21 04:53:39 |        3 |
|  4 |      1 | PHPとは     |       3 | 2018-05-21 04:57:47 |        3 |
+----+--------+-------------+---------+---------------------+----------+
2 rows in set (0.00 sec)

mysql> SELECT books.title, COUNT(*) AS number_of_chapters FROM chapters INNER JOIN books ON books.id = chapters.book_id GROUP BY book_id;
+---------------------+--------------------+
| title               | number_of_chapters |
+---------------------+--------------------+
| はじめてのPHP       |                  3 |
| はじめてのHTML      |                  3 |
+---------------------+--------------------+
2 rows in set (0.00 sec)

mysql> 